
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>


</body>
  <script>
    //  IIFE : immediately invoke arrow function : for calling of arrow function




//JS is synchronous it reads line by line bina pehli line ko execute kiye ye aage nhi bhadta
//JS is single threaded/worker language mtlb ek baar mei ek baaar chlega jbtk execute nhi hoga aage nhi bhdega

//isliye asynchronous kiya  jisse kaam parallel mei hoske hmei rukna n pde


//for synchronous
console.log("palak");
console.log("my name is palak");
console.log("v");

//for asynchronous
console.log("palak");
/*console.log("my name is palak");*/
console.log(new Date().getTime());
console.log("v");

//MAIN THREAD OR SIDE THREAD
//MAIN thread jo time nhi lenge
//side thread jo code time lenge
//databse operations and network call time lenge
//asynchronous function:setTimeOut,SetInterval,ClassInterval,Promise,Callback,Async Await(in functions ke andr kuch bhi daalne se wo as asynchronous ki trh kaam krega )
//hmesha phle is bfunctions ke baad wale chalenge phir beech wale jo function ke andr hunge asynchronus wo baad mei chle nge


/*function waitAsec(){
    let curr_time=new Date().getTime();
    let next_sec=curr_time+1000;
    while(new Date().getTime() < next_sec);
}

function waitNsec(n){
    for(let i=0;i<n;i++){
        waitAsec()

    }
}
waitNsec(6);*/


//asynchronous function:setTimeOut,SetInterval,ClassInterval,Promise,Callback,Async Await(in functions ke andr kuch bhi daalne se wo as asynchronous ki trh kaam krega )
//hmesha phle is bfunctions ke baad wale chalenge phir beech wale jo function ke andr hunge asynchronus wo baad mei chle nge


//asynchronous functions
//setTimeOut(callback,time delay)// aisa krne se ye ek particular time pr sirf ek baar chleega
console.log("hello");
setTimeout(()=>{
    console.log("inside setTimeout function");
    },1000)
console.log("world");


//setInterval(callback,time delay)//ye particular second pr baar baar 2 2 sec ke ant pr execute hota rhega jbtk aap clear interval nhi lgadete
setInterval(()=>{
    console.log("inside setTimeout function");
},3000)


let id=setInterval(()=>{
    console.log("inside setInterval function");
},1000)


setTimeout(()=>{
    clearInterval(id);
},8000)
console.log("katara");



//IIFE
//minification
((name)=>{
    console.log(`MY NAME IS ${name}`);
})("Shiv");

((a,b)=>{
    console.log(`sum of a and b is  ${a+b}`);
})(10,15);

//abstraction
let student=(function IIFE(){
    let marks=75;
    let totalMarks=90;
    function student(){
        details(0);
    }
    function details(){
        console.log(`percentage: ${(marks/totalMarks)*100}`)
    }
    return student;
})()
student();


//TO DOWNLOAD A BOOK
/*function downloadBook(url){
    setTimeout(()=>{
        //fetch(url)
        console.log("book downloaded");
    },3000)
}

function unzipped(){
    setTimeout(()=>{
        console.log("book unzipped");
    },1000)
}
function parsing(){
    setTimeout(()=>{
        console.log("your book is parsed");
    },2000)
}
function testBook(){
    setTimeout(()=>{
        console.log("testing and analyzing of book is completed");
    },4000)
}
function upload(){
    setTimeout(()=>{
        console.log("book uploaded successfully");
    },3000)
}

downloadBook();
unzipped();
parsing();
testBook();
upload();*/  // aisa krne se ye sb unordered chlrhe the


//aisa krne se ordered chalenge
function downloadBook(unzipped){
    setTimeout(()=>{
        //fetch(url)
        console.log("book downloaded");
        unzipped(parsing);

        },3000)
}

function unzipped(parsing){
    setTimeout(()=>{
        console.log("book unzipped");
        parsing(testBook);
    },1000)
}
function parsing(testBook){
    setTimeout(()=>{
        console.log("your book is parsed");
        testBook(upload);
    },2000)
}
function testBook(upload){
    setTimeout(()=>{
        console.log("testing and analyzing of book is completed");
        upload();
    },4000)
}
function upload(){
    setTimeout(()=>{
        console.log("book uploaded successfully");
    },3000)
}

downloadBook(unzipped);

//Promises:container for future values
//3 types of promises:fulfilled,pending,reject
//promise:fulfilled=status=fulfilled,result=value
//promise:pending=status=pending,result=undefined
//promise:reject=status=reject,result=reason,error
//Async/await
/*let p=new promise(resolve,reject){
    if(true){
        resolve(value);
    }
    else{
        reject(error);
    }
}*/

//creater
let p=new Promise((resolve,reject)=>{
    let a=10;
    let b=20;
    if(a+b>50){
        resolve(a+b)
    }
    else{
        reject("sum of a and b is less than 50")
    }
})
//consumer
p.then((res)=>{
    console.log(res)
}).catch((err)=>{
    console.log(err)
})
//condition agar nhi lgayi tu phle jo hoga wo chelga resolve phle hoga toh wo chlega reject phle hoga toh wo chalega

//async-await

let p1=new Promise((resolve,reject)=>{
    resolve("hello");
})
async function prom(){
    try{
        let output=await p1;
        console.log(output)
    }
    catch(error){
        console.log(error)
    }
   
    
}
    
  </script>
</html>
